<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Digitaler Adventskalender ðŸ’Œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #f5f3ff;
      --card: #ffffff;
      --accent: #e11d48;
      --accent-soft: #fee2e2;
      --text-main: #111827;
      --text-muted: #6b7280;
      --door-bg: #111827;
      --door-open-bg: #f97316;
      --door-locked-bg: #9ca3af;
      --error: #b91c1c;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #fef3c7, #e0f2fe, #ede9fe);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      color: var(--text-main);
    }

    .wrapper {
      max-width: 900px;
      width: 100%;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(16px);
      border-radius: 1.5rem;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.15);
      padding: 2rem 1.5rem 2.5rem;
    }

    @media (min-width: 768px) {
      .wrapper {
        padding: 2.5rem 3rem 3rem;
      }
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    header h1 {
      font-size: clamp(1.8rem, 3vw, 2.4rem);
      margin-bottom: 0.5rem;
    }

    header p {
      color: var(--text-muted);
      font-size: 0.95rem;
      max-width: 32rem;
      margin: 0 auto;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 0.8rem;
    }

    @media (min-width: 640px) {
      .calendar {
        grid-template-columns: repeat(6, minmax(0, 1fr));
      }
    }

    @media (min-width: 1024px) {
      .calendar {
        grid-template-columns: repeat(8, minmax(0, 1fr));
      }
    }

    .door {
      position: relative;
      padding-top: 100%; /* square */
      cursor: pointer;
      perspective: 800px;
    }

    .door-inner {
      position: absolute;
      inset: 0;
      border-radius: 0.9rem;
      overflow: hidden;
      transition: transform 0.4s ease, box-shadow 0.4s ease;
      transform-style: preserve-3d;
      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.18);
    }

    .door-front,
    .door-back {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      backface-visibility: hidden;
      padding: 0.4rem;
    }

    .door-front {
      background: var(--door-bg);
      color: #f9fafb;
      font-weight: 700;
      font-size: 1.4rem;
      letter-spacing: 0.05em;
    }

    .door-front span {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2.1rem;
      height: 2.1rem;
      border-radius: 999px;
      border: 2px solid rgba(248, 250, 252, 0.3);
    }

    .door-back {
      background: var(--door-open-bg);
      color: #111827;
      transform: rotateY(180deg);
      text-align: center;
      font-size: 0.85rem;
      line-height: 1.3;
      padding: 0.6rem;
    }

    .door-open .door-inner {
      transform: rotateY(180deg) translateY(2px);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.25);
    }

    .door-locked .door-front {
      background: var(--door-locked-bg);
      opacity: 0.85;
    }

    .door-locked {
      cursor: not-allowed;
    }

    .door:hover:not(.door-locked) .door-inner {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.25);
    }

    .door-back strong {
      display: block;
      margin-bottom: 0.35rem;
      font-size: 0.9rem;
    }

    .door-back a {
      margin-top: 0.4rem;
      display: inline-flex;
      font-size: 0.78rem;
      text-decoration: none;
      border-radius: 999px;
      border: 1px solid rgba(15, 23, 42, 0.2);
      padding: 0.16rem 0.6rem;
    }

    .door-back img {
      margin-top: 0.4rem;
      max-width: 90%;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.35);
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    footer {
      margin-top: 1.8rem;
      text-align: center;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    footer button {
      border: none;
      background: transparent;
      text-decoration: underline;
      cursor: pointer;
      font-size: 0.8rem;
      padding: 0;
      color: var(--accent);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      font-size: 0.75rem;
      margin-bottom: 0.5rem;
    }

    /* === PASSWORD SCREEN === */

    #auth-screen {
      max-width: 420px;
      width: 100%;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(16px);
      border-radius: 1.5rem;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.15);
      padding: 2.2rem 2rem 2.4rem;
    }

    #auth-screen h1 {
      font-size: 1.6rem;
      margin-bottom: 0.5rem;
      text-align: center;
    }

    #auth-screen p {
      font-size: 0.95rem;
      color: var(--text-muted);
      text-align: center;
      margin-bottom: 1.3rem;
    }

    .auth-label {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-muted);
      margin-bottom: 0.3rem;
      display: block;
    }

    .auth-input {
      width: 100%;
      padding: 0.6rem 0.75rem;
      border-radius: 0.75rem;
      border: 1px solid #d1d5db;
      font-size: 0.95rem;
      margin-bottom: 0.75rem;
      outline: none;
    }

    .auth-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(225, 29, 72, 0.3);
    }

    .auth-button {
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 0.65rem 0.8rem;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      margin-top: 0.3rem;
      background: linear-gradient(to right, #e11d48, #fb7185);
      color: #f9fafb;
      box-shadow: 0 10px 20px rgba(190, 24, 93, 0.4);
    }

    .auth-button:active {
      transform: translateY(1px);
      box-shadow: 0 6px 12px rgba(190, 24, 93, 0.5);
    }

    .auth-extra {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .auth-checkbox {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      cursor: pointer;
      user-select: none;
    }

    .auth-checkbox input {
      width: 14px;
      height: 14px;
      cursor: pointer;
    }

    .auth-error {
      margin-top: 0.4rem;
      font-size: 0.8rem;
      color: var(--error);
      min-height: 1em;
    }

    .hidden {
      display: none;
    }

    .header-image {
      display: flex;
      justify-content: center;
      margin-bottom: 1.4rem;
      margin-top: 0.4rem;
    }

    .header-image img {
      width: 100%;
      max-width: 420px;
      border-radius: 24px;
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.25);
      object-fit: cover;
    }
  </style>
</head>
<body>
  <!-- PASSWORD SCREEN -->
  <div id="auth-screen">
    <h1>Nur fÃ¼r dich âœ¨</h1>
    <p>
      Dieser Adventskalender ist passwortgeschÃ¼tzt.
      <br />Gib unser geheimes Wort ein, um die TÃ¼rchen zu Ã¶ffnen.
    </p>

    <label for="password-input" class="auth-label">Passwort</label>
    <input
      id="password-input"
      type="password"
      class="auth-input"
      autocomplete="current-password"
      placeholder="Geheimes Wort eingeben"
    />

    <button id="auth-button" class="auth-button">TÃ¼rchen Ã¶ffnen</button>

    <div class="auth-extra">
      <label class="auth-checkbox">
        <input type="checkbox" id="remember-me" checked />
        <span>Auf diesem GerÃ¤t merken</span>
      </label>
      <span>ðŸ’Œ</span>
    </div>

    <div id="auth-error" class="auth-error"></div>
  </div>

  <!-- MAIN APP (hidden until unlocked) -->
  <div id="app" class="wrapper hidden">
    <header>
      <div class="header-image">
        <img src="images/IMG_9842.JPG" alt="Ãœberraschungsbild" />
      </div>
      <h1>Unser digitaler Adventskalender</h1>
      <p>
        Jeden Tag wartet eine kleine Ãœberraschung auf dich.
        Klicke auf das TÃ¼rchen mit dem heutigen Datum, um es zu Ã¶ffnen.
      </p>
    </header>

    <main class="calendar" id="calendar"></main>

    <footer>
      <span>
        TÃ¼ren, die einmal geÃ¶ffnet wurden, bleiben auf (auf diesem GerÃ¤t).
      </span>
      <br />
      <button id="reset">Alles zurÃ¼cksetzen</button>
    </footer>
  </div>

  <script>
    // === SIMPLE PASSWORD PROTECTION (front-end only) =============

    const CALENDAR_PASSWORD = "merryxmas";
    const AUTH_STORAGE_KEY = "advent_calendar_auth_ok";

    const authScreen = document.getElementById("auth-screen");
    const appWrapper = document.getElementById("app");
    const passwordInput = document.getElementById("password-input");
    const authButton = document.getElementById("auth-button");
    const authError = document.getElementById("auth-error");
    const rememberMeCheckbox = document.getElementById("remember-me");

    const calendarEl = document.getElementById("calendar");
    const STORAGE_KEY = "advent_calendar_opened";

    // aktuell: kein Datums-Lock, damit du alles testen kannst
    const ENABLE_DATE_LOCK = false;

    function showApp() {
      authScreen.classList.add("hidden");
      appWrapper.classList.remove("hidden");
    }

    function handleAuthAttempt() {
      const entered = passwordInput.value.trim();

      if (!entered) {
        authError.textContent = "Bitte gib ein Passwort ein.";
        return;
      }

      if (entered === CALENDAR_PASSWORD) {
        authError.textContent = "";
        if (rememberMeCheckbox.checked) {
          try {
            localStorage.setItem(AUTH_STORAGE_KEY, "true");
          } catch (e) {}
        }
        showApp();
        initCalendar();
      } else {
        authError.textContent =
          "Das Passwort ist leider falsch. Versuch es nochmal. ðŸ’”";
        passwordInput.focus();
        passwordInput.select();
      }
    }

    // === ADVENT CALENDAR LOGIC ====================

    const doorContents = {
  1: {
    title: "1. Dezember",
    text: "Test â€“ wenn du das lesen kannst, funktioniert TÃ¼r 1 ðŸ˜Š",
      },
      2: {
        title: "2. Dezember",
        text: "Ich bin dankbar, dass es dich gibt. Heute: eine extra lange Umarmung. ðŸ¤—",
      },
      3: {
        title: "3. Dezember",
        text: "Playlist-Surprise! HÃ¶r dir unsere Advents-Playlist an.",
        link: "https://example.com/deine-playlist",
        linkLabel: "Zur Playlist ðŸŽµ",
      },
      4: {
        title: "4. Dezember",
        text: "Ein Lieblingsmoment von uns zwei. ðŸ’•",
        img: "images/tag4.jpg",
      },
      24: {
        title: "24. Dezember",
        text: "Frohe Weihnachten, mein Lieblingsmensch. Danke, dass du bei mir bist. ðŸŽ„â¤ï¸",
      },
    };

    function getDefaultContent(day) {
      return {
        title: `TÃ¼rchen ${day}`,
        text: "Eine kleine Ãœberraschung wartet bald hierâ€¦ ðŸ’«",
      };
    }

    function loadOpenedState() {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        return saved ? JSON.parse(saved) : {};
      } catch (e) {
        return {};
      }
    }

    function saveOpenedState(state) {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      } catch (e) {}
    }

    let openedState = loadOpenedState();

    function isDoorUnlocked(day) {
      if (!ENABLE_DATE_LOCK) return true;

      const now = new Date();
      const month = now.getMonth(); // 0 = Januar, 11 = Dezember
      const date = now.getDate();

      if (month > 11) return true;
      if (month < 11) return false;
      return day <= date;
    }

    function createDoor(day) {
      const door = document.createElement("div");
      door.className = "door";
      door.dataset.day = day;

      if (!isDoorUnlocked(day)) {
        door.classList.add("door-locked");
      }

      if (openedState[day]) {
        door.classList.add("door-open");
      }

      const inner = document.createElement("div");
      inner.className = "door-inner";

      const front = document.createElement("div");
      front.className = "door-front";

      const content = doorContents[day] || getDefaultContent(day);

      front.innerHTML = `<span>${day}</span>`;

      const back = document.createElement("div");
      back.className = "door-back";

      back.innerHTML = `
        <div>
          <strong>${content.title}</strong>
          <span>${content.text}</span>
          ${
            content.img
              ? `<br/><img src="${content.img}" alt="Ãœberraschung fÃ¼r Tag ${day}" />`
              : ""
          }
          ${
            content.link
              ? `<br/><a href="${content.link}" target="_blank" rel="noopener noreferrer">${content.linkLabel || "Zur Ãœberraschung"}</a>`
              : ""
          }
        </div>
      `;

      inner.appendChild(front);
      inner.appendChild(back);
      door.appendChild(inner);

      door.addEventListener("click", () => handleDoorClick(door, day));

      return door;
    }

    function handleDoorClick(door, day) {
      if (door.classList.contains("door-locked")) {
        const now = new Date();
        if (now.getMonth() !== 11) {
          alert("Die TÃ¼ren Ã¶ffnen sich im Dezember ðŸŽ„");
        } else {
          alert("Dieses TÃ¼rchen kannst du erst am passenden Tag Ã¶ffnen âœ¨");
        }
        return;
      }

      if (!door.classList.contains("door-open")) {
        door.classList.add("door-open");
        openedState[day] = true;
        saveOpenedState(openedState);
      }
    }

    function buildCalendar() {
      while (calendarEl.firstChild) {
        calendarEl.removeChild(calendarEl.firstChild);
      }

      for (let day = 1; day <= 24; day++) {
        const door = createDoor(day);
        calendarEl.appendChild(door);
      }
    }

    function initCalendar() {
      openedState = loadOpenedState();
      buildCalendar();
    }

    document.addEventListener("DOMContentLoaded", () => {
      authButton.addEventListener("click", handleAuthAttempt);
      passwordInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          handleAuthAttempt();
        }
      });

      const resetBtn = document.getElementById("reset");
      if (resetBtn) {
        resetBtn.addEventListener("click", () => {
          if (
            confirm(
              "MÃ¶chtest du wirklich alle TÃ¼rchen zurÃ¼cksetzen? Sie werden wieder geschlossen."
            )
          ) {
            saveOpenedState({});
            window.location.reload();
          }
        });
      }

      try {
        const ok = localStorage.getItem(AUTH_STORAGE_KEY) === "true";
        if (ok) {
          showApp();
          initCalendar();
        }
      } catch (e) {}
    });
  </script>
</body>
</html>
